!function(e){function t(t,o,a){var n=e(t).html(),c=Handlebars.compile(n)(o);e(a).html(c)}function o(e,t,o){var a={x:5,y:5,sx:0,sy:0,ex:0,ey:0},n=0,c=0;t=t.toLowerCase(),e.addEventListener("touchstart",function(e){var e=e||event;n=(new Date).getTime(),a.sx=e.targetTouches[0].pageX,a.sy=e.targetTouches[0].pageY,a.ex=a.sx,a.ey=a.sy,-1!=t.indexOf("start")&&o()},!0),e.addEventListener("touchmove",function(e){a.ex=e.targetTouches[0].pageX,a.ey=e.targetTouches[0].pageY,-1!=t.indexOf("move")&&o()},!0),e.addEventListener("touchend",function(){var e=a.ex-a.sx,s=a.ey-a.sy;Math.abs(e)>Math.abs(s)&&Math.abs(s)>a.y?e>0?-1!=t.indexOf("right")&&o():-1!=t.indexOf("left")&&o():Math.abs(s)>Math.abs(e)&&Math.abs(e)>a.x?s>0?-1!=t.indexOf("bottom")&&o():-1!=t.indexOf("top")&&o():Math.abs(e)<a.x&&Math.abs(s)<a.y&&((c=(new Date).getTime())-n>300?-1!=t.indexOf("long")&&o():-1!=t.indexOf("click")&&o())},!0)}e.ajaxSetup({error:function(){return alert("调用接口失败"),!1}}),e.getJSON("http://www.easy-mock.com/mock/59814286a1d30433d8505f84/coffeeDemo/list/coffee/goodsList",function(o){t(e("#lists-template"),o,e("#lists"))}),o(document.body,"touchmove",function(){var t=document.body.scrollTop;t>350?(e("#return").css({"background-color":"grey",opacity:"0.5"}),t>700&&e("#rollBack").css("display","block")):(e("#return").css({"background-color":"transparent",opacity:"1"}),e("#rollBack").css("display","none"))});var a=0;o(e("#rollBack")[0],"click",function(){cancelAnimationFrame(a),a=requestAnimationFrame(function e(){var t=document.body.scrollTop||document.documentElement.scrollTop;t>0?(scrollTo(0,t-300),a=requestAnimationFrame(e)):cancelAnimationFrame(a)})})}(jQuery);